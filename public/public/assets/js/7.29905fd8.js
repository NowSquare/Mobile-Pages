(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{8134:function(t,e,s){},d68a:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"fit row wrap justify-start items-start content-start q-pr-lg q-pb-lg bg-light-blue-8"},[t._l(t.sites,(function(e,a){return s("div",{key:a,staticClass:"col-6 col-sm-4 col-md-3 col-lg-2"},[s("q-card",{staticClass:"card text-blue-grey-9 bg-blue-grey-1 q-ml-lg q-mt-lg column"},[s("q-card-section",{staticClass:"col-auto"},[s("QRCode",{staticClass:"qr-100 q-mb-xs",attrs:{text:e.short_url,color:"#000000","bg-color":"transparent","error-level":"Q"}})],1),s("q-card-section",{staticClass:"col",staticStyle:{"max-width":"100%"}},[s("div",{staticClass:"text-body1 ellipsis-3-lines"},[t._v(t._s(e.name))])]),s("q-separator",{staticStyle:{"min-height":"1px"}}),s("q-card-actions",{staticClass:"col-auto"},[s("q-btn",{attrs:{flat:"",to:{name:"site.edit",params:{uuid:e.uuid}},label:"Edit",icon:"mdi-square-edit-outline"}}),s("q-space"),s("q-btn",{attrs:{flat:"",size:"12px",round:"",color:"grey-10",icon:"more_vert"}},[s("q-menu",[s("q-list",{staticStyle:{"min-width":"150px"}},[s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(s){return t.openURL(e.short_url)}}},[s("q-item-section",[t._v("View site")]),s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"open_in_new"}})],1)],1),s("q-separator"),s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"text-red",attrs:{clickable:""},on:{click:function(s){return t.deleteSite(e)}}},[s("q-item-section",[t._v("Delete site")])],1)],1)],1)],1)],1)],1)],1)})),s("div",{staticClass:"col-6 col-sm-4 col-md-3 col-lg-2"},[s("q-card",{staticClass:"card text-grey-9 bg-grey-2 q-ml-lg q-mt-lg column"},[s("q-card-section",{staticClass:"col-auto text-center"},[s("q-icon",{staticClass:"text-grey-5 q-mt-md",attrs:{name:"mdi-qrcode",size:"148px"}})],1),s("q-card-section",{staticClass:"col text-center"}),s("q-separator",{staticStyle:{"min-height":"1px"}}),s("q-card-actions",{staticClass:"col-auto full-width"},[s("q-btn",{staticClass:"full-width",attrs:{flat:"",color:"grey-10",to:{name:"site.new"},label:"New site",icon:"add"}}),s("q-space")],1)],1)],1)],2)},i=[],o=(s("551c"),s("06db"),s("097d"),s("7f7f"),s("b06b")),n=s("1c16"),c=s("dfcf"),l={name:"SiteOverview",components:{QRCode:c["a"]},data:function(){return{sites:{}}},created:function(){var t=this;this.loadSites(),window.addEventListener("resize",Object(n["a"])((function(){t.setMaxCardHeight()}),300))},methods:{setMaxCardHeight:function(){for(var t=0,e=document.getElementsByClassName("card"),s=0;s<e.length;s++)e[s].style.height=null;for(var a=0;a<e.length;a++)parseInt(e[a].offsetHeight)>t&&(t=parseInt(e[a].offsetHeight));for(var i=0;i<e.length;i++)e[i].style.height=t+"px"},openURL:function(t){Object(o["a"])(t)},loadSites:function(){var t=this;this.$q.loading.show({delay:40}),this.$axios.get("sites").then((function(e){t.$q.loading.hide(),t.sites=e.data,t.$nextTick((function(){t.setMaxCardHeight()}))}))},deleteSite:function(t){var e=this;this.$root.$confirm('Do you want to delete "'+t.name+'"? This cannot be undone.',{icon:"delete",agreeLabel:"Delete",width:420}).then((function(s){s&&(e.$q.loading.show({delay:40}),e.$axios.post("site/delete-site",{locale:e.$i18n.locale,siteUuid:t.uuid}).then((function(t){"undefined"!==typeof t.data.msg&&e.$q.notify({icon:"success"===t.data.status?"done":"error",position:"bottom-left",message:t.data.msg}),"success"===t.data.status&&(e.loadSites(),e.$nextTick((function(){e.setMaxCardHeight()})))})).catch((function(t){var e=t.response.data;console.log(e)})).finally((function(){})))}))}},computed:{}},r=l,d=(s("db9f"),s("2877")),u=Object(d["a"])(r,a,i,!1,null,null,null);e["default"]=u.exports},db9f:function(t,e,s){"use strict";var a=s("8134"),i=s.n(a);i.a}}]);